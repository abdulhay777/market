<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- /============= Description Site =============/ -->
    <meta property="og:type" content="site">
    <meta property="og:site_name" content="">
    <meta property="og:title" content="">
    <meta property="og:image" content="">
    <meta property="og:description" content="">
    <!-- -------------------------------------------- -->
    <meta name="description" content="Описание">
    <meta name="keywords" content="Клучивые слова">
    <!-- -------------------------------------------- -->
    <!-- <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon"> -->
    <!-- /============= Description Site =============/ -->

    <!-- /=================== CSS ====================/ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" />
    <link rel="stylesheet" href="/public/css/main.css">
    <!-- /=================== CSS ====================/ -->

    <title>Home</title>
</head>

<body>

    <!-- /=============/ Start /-->
    <div class="container market">

        <!-- /================ Main ================/ -->
        <section class="main">
            
            <div class="main__market">
                <a href="/logout" class="logout">Log out</a>
                <ul>
                    <% if(market.length > 0) { %>
                        <% market.forEach(function (e) { %>
                        <li data-id="<%= e._id %>">
                            <a href="/market/<%= e._id %>">
                                <%= e.market_name %>
                            </a>
                        </li>
                        <% }) %>
                    <% } else { %>
                        <li class="not">No market</li>
                    <% } %>
                </ul>
                <button class="green" data-fancybox data-src="#add-market">Add</button>
            </div>

            <% if(product) { %>
            <div class="main__content">

                <div class="main__content__top">
                    <h2>Products</h2>
                    <div>
                        <button class="green add" data-fancybox data-src="#add-list">Add</button>
                        <button class="blue user" data-fancybox data-src="#add-user">Add user</button>
                        <button class="red delete">Delete</button>
                    </div>
                </div>

                <div class="main__content__lists">
                    <% product.forEach(function (e) { %>
                    <div class="main__content__list" data-id="<%= e._id %>">
                        <div>
                            <p><%= e.product_name %></p>
                            <span class="list-count">Count: <%= e.product_count %></span>
                            |
                            <span class="list-price">Price: <%= e.product_price %>$</span>
                        </div>
                        <div>
                            <button class="blue history" data-fancybox data-src="#history">History</button>
                            <button class="green edit" data-fancybox data-src="#edit">Edit</button>
                            <button class="green buy" data-fancybox data-src="#buy">Buy</button>
                            <button class="red remove">Remove</button>
                        </div>
                    </div>
                    <% }) %>
                </div>
            </div>
            <% } else { %>
                <div>No Product</div>
            <% } %>

        </section>
        <!-- /================ Main ================/ -->

        <!-- Modal -->
        <div id="add-market" style="display: none;">
            <input type="text" placeholder="Name" style="width: 100%">
            <button class="green">Add</button>
        </div>

        <div class="modal" id="add-list" style="display: none;">
            <input type="text" placeholder="Name" style="width: 100%" class="name">
            <input type="number" placeholder="Count" style="width: 100%" class="count">
            <input type="number" placeholder="Price" style="width: 100%" class="price">
            <button class="green">Add</button>
        </div>

        <div class="modal" id="add-user" style="display: none;">
            <input type="email" placeholder="User email" style="width: 100%">
            <button class="green">Add User</button>
        </div>

        <div class="modal" id="edit" style="display: none;">
            <input type="text" class="name" placeholder="Name" style="width: 100%">
            <input type="number" class="count" placeholder="Count" style="width: 100%">
            <input type="number" class="price" placeholder="Price" style="width: 100%">
            <button class="green">Save</button>
        </div>

        <div class="modal" id="buy" style="display: none;">
            <input type="number" placeholder="Count" style="width: 100%">
            <button class="green">Buy</button>
        </div>

        <div class="modal" id="history" style="display: none;" style="width: 500px;">
            <table>
                <tr>
                    <th>User name</th>
                    <th>Count</th>
                    <th>Price</th>
                    <th>Total price</th>
                    <th>Date</th>
                </tr>
            </table>
        </div>

    </div>
    <!-- /=============/ End /-->

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/public/js/main.js"></script>

</body>

</html>